(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(26),c=n.n(a),i=n(64),s=n(45),u=n(63),l=n(102),f=n(58),d=n(17),h=n(27),v=n(46),b=n(29),j=n(2),p=function(e){var t=e.children;return Object(j.jsx)(h.a,{children:Object(j.jsx)(b.a,{children:Object(j.jsx)(v.a,{children:t})})})},w=n(34),g=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise((function(o,a){t().then(o).catch((function(c){setTimeout((function(){1!==n?e(t,n-1,r).then(o,a):a(c)}),r)}))}))},m=(n(97),function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,159))}),O=o.a.lazy((function(){return g(m)})),x=o.a.lazy((function(){return n.e(4).then(n.bind(null,160))})),k=function(){var e=Object(b.b)().user;return o.a.useEffect((function(){m()}),[]),Object(j.jsx)(o.a.Suspense,{fallback:Object(j.jsx)(w.a,{}),children:e?Object(j.jsx)(O,{}):Object(j.jsx)(x,{})})},y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(j.jsx)(p,{children:Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(i.a,{store:d.a,children:Object(j.jsx)(f.a,{persistor:d.b,children:Object(j.jsx)(s.a,{children:Object(j.jsx)(l.a,{utils:u.a,children:Object(j.jsx)(k,{})})})})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");y?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):P(t,e)}))}}()},15:function(e,t,n){"use strict";var r="accessToken";t.a={getToken:function(){return localStorage.getItem(r)},storeToken:function(e){return 200===e.status||201===e.status?(localStorage.setItem(r,e.data.accessToken),Promise.resolve(null)):Promise.reject(new Error(e.statusText))},removeToken:function(){localStorage.removeItem(r)}}},17:function(e,t,n){"use strict";n.d(t,"b",(function(){return v}));var r=n(22),o=n(43),a=n(59),c=n.n(a),i=n(5),s=n(19),u=Object(i.b)({misc:s.b}),l={key:"openjio-frontend",storage:c.a},f=Object(o.a)(l,u),d=Object(r.c)({serializableCheck:!1}),h=Object(r.a)({reducer:f,middleware:d}),v=Object(o.b)(h);t.a=h},19:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(1),o=n(22),a=Object(o.b)({name:"misc",initialState:{},reducers:{setUser:function(e,t){e.user=Object(r.a)({},t.payload),e.lastRetrieved=Date.now()},clearUser:function(e){e.user=void 0,e.lastRetrieved=void 0}}}),c=a.actions,i=c.setUser,s=c.clearUser;t.b=a.reducer},24:function(e,t,n){"use strict";var r=n(14),o=n.n(r),a=n(28),c=n(17),i="Something went wrong. Please try again!",s=n(19),u=n(32),l=n(15),f=function(){return l.a.removeToken(),c.a.dispatch(Object(s.a)()),Promise.resolve()},d=function(){var e=Object(a.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("users",t).catch((function(e){var t,n,r;return Promise.reject(new Error(null!==(t=null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)&&void 0!==t?t:i))}));case 2:return n=e.sent,e.abrupt("return",l.a.storeToken(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(a.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.post("auth/login",t).catch((function(e){var t,n,r;return Promise.reject(new Error(null!==(t=null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)&&void 0!==t?t:i))}));case 2:return n=e.sent,e.abrupt("return",l.a.storeToken(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(a.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.a.getToken()){e.next=3;break}return e.abrupt("return",Promise.resolve(null));case 3:return e.prev=3,e.next=6,u.a.get("users/self");case 6:if(200!==(t=e.sent).status){e.next=11;break}return n=t.data.user,c.a.dispatch(Object(s.c)(n)),e.abrupt("return",n);case 11:throw new Error(t.statusText);case 14:return e.prev=14,e.t0=e.catch(3),f(),e.abrupt("return",Promise.reject(new Error(e.t0)));case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}();t.a={signup:d,login:h,logout:f,getUser:v}},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var r=n(1),o=n(13),a=n(0),c=n.n(a),i=n(61),s=n(34),u=n(24),l=n(2),f=c.a.createContext(void 0),d=function(e){var t=c.a.useState(!1),n=Object(o.a)(t,2),a=n[0],d=n[1],h=Object(i.a)({promiseFn:u.a.getUser}),v=h.data,b=void 0===v?null:v,j=h.error,p=h.isRejected,w=h.isPending,g=h.isSettled,m=h.reload;if(c.a.useLayoutEffect((function(){g&&d(!0)}),[g]),!a){if(w)return Object(l.jsx)(s.a,{});if(p&&j)return Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:"There's a problem. Try refreshing the app."}),Object(l.jsx)("pre",{children:j.message})]})}return Object(l.jsx)(f.Provider,Object(r.a)({value:{data:b,signup:function(e){return u.a.signup(e).then(m).catch((function(e){return Promise.reject(new Error(e.message))}))},login:function(e){return u.a.login(e).then(m).catch((function(e){return Promise.reject(new Error(e.message))}))},logout:function(){return u.a.logout().then(m).then((function(){return window.location.replace(window.location.href)}))}}},e))},h=function(){var e=c.a.useContext(f);if(void 0===e)throw new Error("useAuth must be used within a AuthProvider");return e}},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(1),o=n(0),a=n.n(o),c=n(27),i=n(2),s=a.a.createContext(void 0),u=function(e){var t=Object(c.b)().data;return Object(i.jsx)(s.Provider,Object(r.a)({value:{user:t}},e))},l=function(){var e=a.a.useContext(s);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e}},32:function(e,t,n){"use strict";var r=n(23),o=n(40),a=n.n(o),c=n(60),i=n.n(c),s=n(15),u=a.a.create({baseURL:"".concat("http://localhost:3005","/").concat("v1"),headers:{"Content-Type":"application/json"},transformResponse:[].concat(Object(r.a)(a.a.defaults.transformResponse),[function(e){return i.a.camelizeKeys(e)}])});u.interceptors.request.use((function(e){var t=s.a.getToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(new Error(e))})),t.a=u},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(0);var r=n(2),o=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("link",{rel:"stylesheet",href:"https://pagecdn.io/lib/font-awesome/5.10.0-11/css/all.min.css",integrity:"sha256-p9TTWD+813MlLaxMXMbTA7wN/ArzGyW/L7c5+KkjOkM=",crossOrigin:"anonymous"}),Object(r.jsx)("div",{className:"w-full h-full fixed block top-0 left-0 bg-white opacity-75 z-50",children:Object(r.jsx)("span",{className:"text-orange-600 opacity-75 align-center align-middle top-1/2 text-center my-0 mx-auto block relative w-0 h-0",children:Object(r.jsx)("i",{className:"fas fa-circle-notch fa-spin fa-5x"})})})]})}},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(1),o=n(13),a=n(0),c=n.n(a),i=n(2),s=c.a.createContext(void 0),u=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],u=n[1];return Object(i.jsx)(s.Provider,Object(r.a)({value:{hasError:c,setHasError:function(e){return u(e)}}},e))},l=function(){var e=c.a.useContext(s);if(void 0===e)throw new Error("useError must be used within a ErrorProvider");return e}},97:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.0b18ad6b.chunk.js.map